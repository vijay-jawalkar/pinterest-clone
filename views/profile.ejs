<% include ./partials/header.ejs %>
    <div class="w-full min-h-screen bg-zinc-800 pt-1">

        <!-- form to edit profile pic -->
        <form id = "uploadform" hidden action="/fileupload" method="post" enctype="multipart/form-data">
            <input type="file" name = "image" />
        </form>

        <!-- profile card  -->
        <div class="flex flex-col justify-center items-center text-white gap-2 mt-20 ">

            <div class="relative">
                <span id = "uploadicon" class="w-10 h-10 absolute bottom-0 right-0 bg-yellow-300 rounded-full text-lg flex justify-center items-center">
                    <i class="text-zinc-800 ri-pencil-fill"></i>
                </span>
                <div class="w-32 h-32 rounded-full bg-zinc-200 overflow-hidden">
                    <img id = "profileicon" src="/images/uploads/<%= user.profileImage %>" alt = "profile-pic" class="h-full w-full object-cover" />
                </div>
            </div>

           
            <h1 class="text-3xl font-semibold"> <%= user.name %></h1>
            <h3>
                <img src="/images/Pinterest-logo.png" alt="logo" class=" w-5 h-5 inline" />
                <span> <%= user.email %> </span>
            </h3>

            <div class="text-xs font-semibold flex justify-center gap-6 mt-6">
                <span class="bg-zinc-700 py-2 px-7 rounded-full"> Share </span>
                <a href="/edit" class="bg-zinc-700 py-2 px-7 rounded-full"> Edit profile</a>
            </div>

            <a href="/add" class="px-7 py-2 bg-red-700 text-white rounded-lg text-xs font-semibold mt-6">Add New Post</a>
        </div>

        <!--multiple cards -->
        <div class="flex flex-wrap justify-center lg:justify-start gap-10  px-10 mt-10">

            <!-- card -->
            <div>
                <div class="w-52 h-32 bg-zinc-300 rounded-lg overflow-hidden">
                    <img src = "/images/uploads/<%= user?.posts[0]?.postImage %>" alt = "card-img" class="h-full w-full object-cover" />
                </div>
                <div>
                    <a href = "/show/posts" class="inline-block text-xl font-semibold text-white mt-3">Your uploaded pins</a>
                    <h4 class="text-white text-sm opacity-80"><%= user.posts.length %> </h4>
                </div>
            </div>









        </div>
    </div>


    <!-- javascript code for profile pic edit -->
    <script> 
    document.querySelector("#uploadicon").addEventListener("click", function(){
     document.querySelector("#uploadform input").click();
    })

    document.querySelector("#uploadform input").addEventListener("change", function(){
        document.querySelector("#uploadform").submit();
    })
    </script>

    <% include ./partials/footer.ejs %>